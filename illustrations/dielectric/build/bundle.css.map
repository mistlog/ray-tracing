{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../../../section.tsx"
  ],
  "sourcesContent": [
    "\n<script>\nimport { onMount } from 'svelte';\nimport { Vector3 } from 'three';\nimport { World } from '../../common/with-material/world.js';\nimport { Sphere } from '../../common/with-material/sphere.js';\nimport { Camera } from '../../common/camera.js';\nimport { Lambertian, Dielectric, Metal } from '../../common/with-material/material.js';\n\n\nlet canvas;\nonMount(() => {\n  function generateColor(ray, world, depth) {\n    if (depth <= 0) {\n      return new Vector3(0, 0, 0);\n    }\n\n    const record = world.hit(ray, {\n      min: 0.001,\n      max: Number.MAX_SAFE_INTEGER\n    });\n\n    if (record) {\n      const {\n        scattered,\n        attenuation\n      } = record.material.scatter(ray, record);\n\n      if (scattered) {\n        const color = generateColor(scattered, world, depth - 1);\n        return color.multiply(attenuation);\n      }\n\n      return new Vector3(0, 0, 0);\n    }\n\n    const unitDirection = ray.direction.clone().normalize();\n    const t = 0.5 * (unitDirection.y + 1);\n    const blend = new Vector3(0.5, 0.7, 1.0).lerp(new Vector3(1, 1, 1), t);\n    return blend;\n  }\n\n  ;\n  const width = canvas.width;\n  const height = canvas.height;\n  const context = canvas.getContext('2d');\n  const imageData = context.getImageData(0, 0, width, height);\n  const world = new World().addObject(new Sphere(new Vector3(0, 0, 1), 0.5, new Lambertian(new Vector3(0.1, 0.2, 0.5)))).addObject(new Sphere(new Vector3(0, 100.5, 1), 100, new Lambertian(new Vector3(0.8, 0.8, 0)))).addObject(new Sphere(new Vector3(1, 0, 1), 0.5, new Metal(new Vector3(0.8, 0.6, 0.2)))).addObject(new Sphere(new Vector3(-1, 0, 1), 0.5, new Dielectric(1.5)));\n  const camera = new Camera();\n  const samples = 50;\n  const maxDepth = 50;\n\n  for (let x = 0; x < width; ++x) {\n    for (let y = 0; y < height; ++y) {\n      const color = new Vector3(0, 0, 0);\n\n      for (let k = 0; k < samples; ++k) {\n        const u = (x + Math.random()) / width;\n        const v = (y + Math.random()) / height;\n        const ray = camera.getRay(u, v);\n        color.add(generateColor(ray, world, maxDepth));\n      }\n\n      color.divideScalar(samples);\n      const r = Math.sqrt(color.x);\n      const g = Math.sqrt(color.y);\n      const b = Math.sqrt(color.z);\n      const n = (y * width + x) * 4;\n      imageData.data[n] = r * 255;\n      imageData.data[n + 1] = g * 255;\n      imageData.data[n + 2] = b * 255;\n      imageData.data[n + 3] = 255;\n    }\n  }\n\n  context.putImageData(imageData, 0, 0);\n});\nlet width = 600;\nlet height = 300;\n</script>\n\n\n<div class=\"container\">\n        <canvas bind:this={canvas} width={width} height={height}></canvas>\n    </div>\n\n\n<style>\n.container {\n    display: flex;\n    align-items: center;\n    justify-content: center\n}\n</style>"
  ],
  "names": [],
  "mappings": "AAwFA,UAAU,eAAC,CAAC,AACR,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM;AAC3B,CAAC"
}